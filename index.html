<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puerta</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Puerta üö™ üèçÔ∏è</h1>
       
        <p id="fechaActual"></p>
        <div id="diaActual">
            <!-- Aqu√≠ se mostrar√° el d√≠a actual -->
        </div>
        <div class="schedule" id="schedule">
            <!-- Las asignaciones se generar√°n din√°micamente con JavaScript -->
        </div>
        <h2>¬°Para ver el horario deseado le recomiendo presionar estos botones üëá!</h2>
        <div class="buttons">
            <button id="prevWeek">Ver Semana Anterior</button>
            <button id="nextWeek">Ver Siguiente Semana</button>
        </div>
    </div>

    <script>
// Lista de personas
const personas = [
    "Abraham Gonz√°lez",  "Carlos Cierra", "Jorge Pe√±ata", "Deiver Galv√°n", 
    "Jairo Hern√°ndez", "Daniel Morales", "Esteban Martinez" , 
    "Marco Osorio", "Oscar Pe√±ata", "Jhony Gonz√°lez", 
];

// D√≠as de la semana
const dias = ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado", "Domingo"];

// Variable para llevar el control de la semana actual
let semanaActual = 0;

// Fecha fija inicial: 9 de febrero de 2025
const fechaInicial = new Date(2025, 1, 9); // Meses en JavaScript son 0-indexados (1 = febrero)
let fechaActual = new Date(fechaInicial);

// Funci√≥n para formatear la fecha
function formatearFecha(fecha) {
    const opciones = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
    return fecha.toLocaleDateString('es-ES', opciones);
}

// Funci√≥n para obtener el inicio de la semana (lunes)
function obtenerInicioSemana(fecha) {
    const diaSemana = fecha.getDay(); // 0 (domingo) a 6 (s√°bado)
    const diferencia = diaSemana === 0 ? 6 : diaSemana - 1; // Ajuste para que el lunes sea el inicio
    const inicioSemana = new Date(fecha);
    inicioSemana.setDate(fecha.getDate() - diferencia);
    return inicioSemana;
}

// Funci√≥n para mostrar el d√≠a actual
function mostrarDiaActual() {
    const diaActualElemento = document.getElementById("diaActual");
    const diaActual = formatearFecha(fechaActual);
   
}

// Funci√≥n para verificar la disponibilidad de una persona en un d√≠a
function esDisponible(persona, dia) {
    const noDisponibles = {
        "Oscar Pe√±ata": ["Jueves", "S√°bado"],
        "Daniel Morales": ["Martes", "S√°bado", "Domingo"],
        "Deiver Galv√°n": ["S√°bado"],
    };
    return !(noDisponibles[persona] && noDisponibles[persona].includes(dia));
}

// Funci√≥n para generar las asignaciones de la semana
function generarAsignaciones() {
    const schedule = document.getElementById("schedule");
    schedule.innerHTML = ""; // Limpiamos el contenido anterior

    // Obtener el inicio de la semana actual
    const inicioSemana = obtenerInicioSemana(fechaActual);

    // Asignamos personas a los d√≠as
    let indicePersona = semanaActual % personas.length; // Iniciar desde un √≠ndice basado en la semana

    for (let i = 0; i < dias.length; i++) {
        // Calcular la fecha para cada d√≠a de la semana
        const diaFecha = new Date(inicioSemana);
        diaFecha.setDate(inicioSemana.getDate() + i);

        const dia = document.createElement("div");
        dia.className = "day";

        // Mostrar la fecha del d√≠a
        const titulo = document.createElement("h2");
        titulo.textContent = formatearFecha(diaFecha);
        dia.appendChild(titulo);

        // Asignar tareas seg√∫n el d√≠a
        if (dias[i] === "Jueves" || dias[i] === "Domingo") {
            for (let j = 0; j < 2; j++) {
                while (!esDisponible(personas[indicePersona], dias[i])) {
                    indicePersona = (indicePersona + 1) % personas.length; // Rotamos si no est√° disponible
                }
                const tipoServicio = j === 0 ? 'puerta' : 'motos';
                const tarea = document.createElement("p");
                tarea.textContent = `Encargado de ${tipoServicio}: ${personas[indicePersona]}`;
                dia.appendChild(tarea);
                indicePersona = (indicePersona + 1) % personas.length; // Pasamos al siguiente
            }
        } else {
            while (!esDisponible(personas[indicePersona], dias[i])) {
                indicePersona = (indicePersona + 1) % personas.length; // Rotamos si no est√° disponible
            }
            const tarea = document.createElement("p");
            tarea.textContent = `Encargado de puerta: ${personas[indicePersona]}`;
            dia.appendChild(tarea);
            indicePersona = (indicePersona + 1) % personas.length; // Pasamos al siguiente
        }

        schedule.appendChild(dia);
    }
}

// Funci√≥n para avanzar a la siguiente semana
function siguienteSemana() {
    semanaActual++;
    fechaActual.setDate(fechaActual.getDate() + 7); // Avanzamos 7 d√≠as
    generarAsignaciones();
}

// Funci√≥n para retroceder a la semana anterior
function semanaAnterior() {
    if (semanaActual > 0) {
        semanaActual--;
        fechaActual.setDate(fechaActual.getDate() - 7); // Retrocedemos 7 d√≠as
        generarAsignaciones();
    }
}

// Mostrar el d√≠a actual
mostrarDiaActual();

// Generar las asignaciones iniciales
generarAsignaciones();

// Evento del bot√≥n para avanzar a la siguiente semana
document.getElementById("nextWeek").addEventListener("click", siguienteSemana);

// Evento del bot√≥n para retroceder a la semana anterior
document.getElementById("prevWeek").addEventListener("click", semanaAnterior);
    </script>
</body>
</html>